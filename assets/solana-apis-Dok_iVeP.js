import{C as T,L as u,P as k,S as b,T as S}from"./index-BKs-ye6e.js";const P="https://solana-devnet.g.alchemy.com/v2/Z5rkVTBL528nGl4kzLL8E",i=new T(P,"confirmed");function p(t){try{return new k(t)}catch{throw console.error("Invalid address format",t),new Error("Invalid Solana public key.")}}async function v(t){const n=p(t);try{return await i.getBalance(n,"confirmed")/u}catch{return null}}async function I(t,n,r,a){const s=p(n),e=r*u;if(e<=0)throw new Error("Amount must be greater than zero");const l=b.transfer({fromPubkey:t,toPubkey:s,lamports:e}),o=new S().add(l),{blockhash:c}=await i.getLatestBlockhash();o.recentBlockhash=c,o.feePayer=t;const f=await a(o),m=await i.sendRawTransaction(f.serialize());return await i.confirmTransaction({blockhash:c,lastValidBlockHeight:(await i.getLatestBlockhash()).lastValidBlockHeight,signature:m},"confirmed"),m}async function A(t,n){const r=await L(t,n),a=[];for(const s of r)s&&a.push(B(s,t));return a}function B(t,n){const r=t.transaction.signatures[0],a=`${r.slice(0,4)}...${r.slice(-4)}`,s=t.meta?.err?"Failed":"Confirmed",e=t.blockTime;let l="N/A";e&&(l=new Date(e*1e3).toLocaleString());let o=0,c="none";const f=t.transaction.message.instructions;for(const w of f){const g=w;if(g.program==="system"&&g.parsed?.type==="transfer"){const h=g.parsed?.info,d=h.lamports;if(d>0){if(h.source===n){o=-(d/u),c="sent";break}else if(h.destination===n){o=d/u,c="received";break}}}}if(c==="none")return null;const y=`${o>=0?"+":""}${o.toFixed(4)}`;return{id:a,timestamp:l,amount:y,status:s}}async function L(t,n){const a=(await D(t,n)).map(e=>e.signature);return await E(a)}async function D(t,n=10){const r=p(t);let a=[],s={limit:Math.min(n,1e3)};for(;a.length<n;)try{a.length>0&&(s.before=a[a.length-1].signature);const e=await i.getSignaturesForAddress(r,s,"confirmed");if(e.length===0||(a=a.concat(e),a.length>=n))break}catch(e){console.error("Error fetching signatures: ",e);break}return a.slice(0,n)}async function E(t){if(t.length===0)return[];try{return await i.getParsedTransactions(t,{maxSupportedTransactionVersion:0,commitment:"confirmed"})}catch(n){console.error("Error fetching transaction details: ",n)}return[]}export{A as a,v as g,I as s};
